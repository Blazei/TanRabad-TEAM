machine:
  timezone:
    Asia/Bangkok
  environment:
    ANDROID_HOME: /home/ubuntu/android
dependencies:
  cache_directories:
    - ~/.android
    - ~/.gradle/caches/
    - ~/.gradle/wrapper/
    - ~/android
  override:
    - chmod +x circle.sh
    - ./circle.sh
    - chmod +x gradlew
    - ./gradlew dependencies
test:
  override:
    - ./gradlew clean build -PdisablePreDex
  post:
    - cp -r app/build/outputs/apk $CIRCLE_ARTIFACTS
    - cp -r app/build/outputs/lint $CIRCLE_TEST_REPORTS
    - cp -r app/build/outputs/checkstyle $CIRCLE_TEST_REPORTS
    - cp -r app/build/outputs/pmd $CIRCLE_TEST_REPORTS
    - cp -r app/build/outputs/findbugs $CIRCLE_TEST_REPORTS
